/*! jquery asChoice - v0.2.1 - 2014-09-06
* https://github.com/amazingSurge/jquery-asChoice
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a){"use strict";var b=a.asChoice=function(c,d){this.select=c,this.$select=a(c),this.$options=this.$select.find("option");var e={};0!==this.$options.length&&(e.status={},e.value=[],e.multiple=this.$select.prop("multiple"),a.each(this.$options,function(b,c){e.status[a(c).attr("value")]={},e.status[a(c).attr("value")].text=a(c).text(),a(c).prop("selected")&&e.value.push(a(c).attr("value"))})),this.options=a.extend({},b.defaults,d,e),this.namespace=this.options.namespace,this.status=this.options.status,this.classes={selected:this.namespace+"-selected",disabled:this.namespace+"-disabled",skin:this.namespace+"_"+this.options.skin},this.value=[],this.disabled=!1,this._trigger("init"),this.init()};b.prototype={constuctor:b,init:function(){var b=this,c='<li><span class="'+b.namespace+'-text"></span></li>';this.$select.css({display:"none"}),this.$wrap=a("<ul></ul>"),this.$wrap.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),a.each(this.status,function(d,e){var f=a(c).data("value",d);"object"==typeof e?(e.icon&&a("<i></i>").addClass(e.icon).appendTo(f),e.text&&f.find("span").text(e.text)):f.find("span").text(e.text),a.each(b.value,function(a,c){c===d&&f.addClass(b.classes.selected)}),b.$wrap.append(f)}),this.$select.after(this.$wrap),this.$wrap.find("a").on("click.asChoice",function(a){a.preventDefault()}),this.options.multiple===!0?(this.$wrap.delegate("li","click.asChoice touchstart.asChoice",function(){return a(this).hasClass(b.classes.selected)?(b.set.call(b,a(this).data("value"),"unselected"),!1):(b.set.call(b,a(this).data("value"),"selected"),!1)}),a.each(this.options.value,function(a,c){b.set.call(b,c,"selected")})):(this.$wrap.delegate("li","click.asChoice touchstart.asChoice",function(){b.set(a(this).data("value"),"selected")}),this.set(this.options.value[0],"selected")),this._trigger("ready")},_trigger:function(a){var b=Array.prototype.slice.call(arguments,1),c=b.concat([this]);this.$select.trigger("asChoice::"+a,c),this.$select.trigger(a+".asChoice",c),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var d="on"+a;"function"==typeof this.options[d]&&this.options[d].apply(this,b)},set:function(b,c){var d,e,f=a.inArray(b,this.value);if(!this.disabled)if(this.options.multiple===!0)a.each(this.$options,function(c,e){a(e).attr("value")===b&&(d=a(e))}),a.each(this.$wrap.find("li"),function(c,d){a(d).data("value")===b&&(e=a(d))}),"selected"===c?(this.value.push(b),e.addClass(this.classes.selected),d.prop("selected",!0)):(this.value.splice(f,1),e.removeClass(this.classes.selected),d.prop("selected",!1)),this._trigger("change");else{if(b===this.value[0])return!1;if("selected"!==c)return!1;var g=this;a.each(this.$options,function(c,d){a(d).attr("value")===b?a(d).prop("selected",!0):a(d).prop("selected",!1)}),a.each(this.$wrap.find("li"),function(c,d){a(d).data("value")===b?(a(d).addClass(g.classes.selected),g.value[0]=b):a(d).removeClass(g.classes.selected)}),this._trigger("change")}},val:function(b,c){var d=this;if(b&&c)this.set(b,c);else{if(!b)return this.value;if("string"==typeof b)this.set(b,"selected");else{var e=this.$wrap.find("li");a.each(e,function(c,e){var f=a(e).data("value");a.inArray(f,b)?d.set(f,"selected"):d.set(f,"unselected")})}}},enable:function(){return this.disabled=!1,this.$wrap.removeClass(this.classes.disabled),this},disable:function(){return this.disabled=!0,this.$wrap.addClass(this.classes.disabled),this},destroy:function(){this.$wrap.undelegate(".asChoice"),this.$wrap.find("a").off(".asChoice"),this.$wrap.remove()}},b.defaults={skin:null,multiple:!1,value:["default"],name:null,namespace:"asChoice"},a.fn.asChoice=function(c){if("string"!=typeof c)return this.each(function(){a.data(this,"asChoice")||a.data(this,"asChoice",new b(this,c))});var d=c,e=Array.prototype.slice.call(arguments,1);if(/^\_/.test(d))return!1;if("get"!==d&&("val"!==d||0!==e.length))return this.each(function(){var b=a.data(this,"asChoice");b&&"function"==typeof b[d]&&b[d].apply(b,e)});var f=this.first().data("asChoice");return f&&"function"==typeof f[d]?f[d].apply(f,e):void 0}}(jQuery);