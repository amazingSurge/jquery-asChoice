/*! jquery asChoice - v0.2.0 - 2014-05-13
* https://github.com/amazingSurge/jquery-asChoice
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(t){"use strict";var s=t.asChoice=function(e,i){this.select=e,this.$select=t(e),this.$options=this.$select.find("option");var a={};0!==this.$options.length&&(a.status={},a.value=[],a.multiple=this.$select.prop("multiple"),t.each(this.$options,function(s,e){a.status[t(e).attr("value")]={},a.status[t(e).attr("value")].text=t(e).text(),t(e).prop("selected")&&a.value.push(t(e).attr("value"))})),this.name=this.$select.attr("name")?this.$select.attr("name"):i.name,this.options=t.extend({},s.defaults,i,a),this.namespace=this.options.namespace,this.status=this.options.status,this.classes={selected:this.namespace+"-selected",disabled:this.namespace+"-disabled",skin:this.namespace+"_"+this.options.skin},this.value=[],this.disabled=!1,this._trigger("init"),this.init()};s.prototype={constuctor:s,init:function(){var s=this,e='<li><span class="'+s.namespace+'-text"></span></li>';this.$select.css({display:"none"}),this.$wrap=t("<ul></ul>"),this.$wrap.addClass(this.namespace),this.options.skin&&this.$wrap.addClass(this.classes.skin),t.each(this.status,function(i,a){var l=t(e).data("value",i);"object"==typeof a?(a.icon&&t("<i></i>").addClass(a.icon).appendTo(l),a.text&&l.find("span").text(a.text)):l.find("span").text(a.text),t.each(s.value,function(t,e){e===i&&l.addClass(s.classes.selected)}),s.$wrap.append(l)}),this.$select.after(this.$wrap),this.$wrap.find("a").on("click.asChoice",function(t){t.preventDefault()}),this.options.multiple===!0?(this.$wrap.delegate("li","click.asChoice touchstart.asChoice",function(){return t(this).hasClass(s.classes.selected)?(s.set.call(s,t(this).data("value"),"unselected"),!1):(s.set.call(s,t(this).data("value"),"selected"),!1)}),t.each(this.options.value,function(t,e){s.set.call(s,e,"selected")})):(this.$wrap.delegate("li","click.asChoice touchstart.asChoice",function(){s.set(t(this).data("value"),"selected")}),this.set(this.options.value[0],"selected")),this._trigger("ready")},_trigger:function(t){this.$select.trigger("asColorInput::"+t,this),this.$select.trigger(t+".asColorInput",this),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var s="on"+t,e=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;"function"==typeof this.options[s]&&this.options[s].apply(this,e)},set:function(s,e){var i,a,l=t.inArray(s,this.value);if(!this.disabled)if(this.options.multiple===!0)t.each(this.$options,function(e,a){t(a).attr("value")===s&&(i=t(a))}),t.each(this.$wrap.find("li"),function(e,i){t(i).data("value")===s&&(a=t(i))}),"selected"===e?(this.value.push(s),a.addClass(this.classes.selected),i.prop("selected",!0)):(this.value.splice(l,1),a.removeClass(this.classes.selected),i.prop("selected",!1)),this._trigger("change");else{if(s===this.value[0])return!1;if("selected"!==e)return!1;var n=this;t.each(this.$options,function(e,i){t(i).attr("value")===s?t(i).prop("selected",!0):t(i).prop("selected",!1)}),t.each(this.$wrap.find("li"),function(e,i){t(i).data("value")===s?(t(i).addClass(n.classes.selected),n.value[0]=s):t(i).removeClass(n.classes.selected)}),this._trigger("change")}},val:function(s,e){var i=this;if(s&&e)this.set(s,e);else{if(!s)return this.value;if("string"==typeof s)this.set(s,"selected");else{var a=this.$wrap.find("li");t.each(a,function(e,a){var l=t(a).data("value");t.inArray(l,s)?i.set(l,"selected"):i.set(l,"unselected")})}}},enable:function(){return this.disabled=!1,this.$wrap.removeClass(this.classes.disabled),this},disable:function(){return this.disabled=!0,this.$wrap.addClass(this.classes.disabled),this},destroy:function(){this.$wrap.undelegate(".asChoice"),this.$wrap.find("a").off(".asChoice"),this.$wrap.remove()}},s.defaults={skin:null,multiple:!1,value:["default"],name:null,namespace:"asChoice"},t.fn.asChoice=function(e){if("string"==typeof e){var i=e,a=arguments.length>1?Array.prototype.slice.call(arguments,1):void 0;return this.each(function(){var s=t.data(this,"asChoice");"function"==typeof s[i]&&s[i].apply(s,a)})}return this.each(function(){t.data(this,"asChoice")||t.data(this,"asChoice",new s(this,e))})}})(jQuery);